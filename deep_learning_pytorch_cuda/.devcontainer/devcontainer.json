{
	// For quick reference: https://containers.dev/implementors/json_reference/
	// 1. Define the container name and build settings.
	"name": "Deep Learning Dev - Pytorch with CUDA",
	"build": {
		"dockerfile": "Dockerfile"
	},
	// 2. Define the workspace mount point and default folder.
	"workspaceMount": "source=${localWorkspaceFolder},target=/home/${localEnv:USER}/dev,type=bind",
	"workspaceFolder": "/home/${localEnv:USER}/dev",
	// 3. Use 'runArgs' to pass arguments to the container.
	"runArgs": [
		"--name",
		"deep_learning_pytorch_cuda",
		"--network=host",
		"--gpus=all",
		"--runtime=nvidia"
	],
	// 4. Use 'remoteEnv' to set environment variables inside the container.
	"remoteEnv": {
		"DISPLAY": "${localEnv:DISPLAY}",
		"GIT_EDITOR": "${localEnv:GIT_EDITOR}",
		"QT_X11_NO_MITSHM": "1",
		"NVIDIA_VISIBLE_DEVICES": "all",
		"NVIDIA_DRIVER_CAPABILITIES": "all"
	},
	// 5. Use 'mounts' to make a list of local directories available inside the container. More info: https://code.visualstudio.com/remote/advancedcontainers/add-local-file-mount
	"mounts": [
		// (Optional) Source code directory.
		"source=${localEnv:DEEP_LEARNING_SOURCE_PATH},target=/home/${localEnv:USER}/dev/source,type=bind",
		// Support running GUIs inside the container.
		"source=/tmp/.X11-unix/,target=/tmp/.X11-unix/,type=bind",
		// Support accessing sockets (network, audio, D-bus) inside the container.
		"source=/run/user/1000,target=/run/user/1000,type=bind",
		// Share local time setting.
		"source=/etc/localtime,target=/etc/localtime,type=bind"
	],
	// 6. Features to add to the Dev Container. More info: https://containers.dev/implementors/features
	"features": {
		// Create a non-root user to match the host user.
		"ghcr.io/devcontainers/features/common-utils:2": {
			"installZsh": "true",
			"configureZshAsDefaultShell": "true",
			"installOhMyZsh": "true",
			"username": "${localEnv:USER}",
			"userUid": "automatic",
			"userGid": "automatic"
		},
		// Python with uv, Ruff, Mypy, MonkeyType and Bandit, installed using pipx
		"ghcr.io/devcontainers/features/python:1": {
			"installTools": "true",
			"toolsToInstall": "uv,ruff,mypy,MonkeyType,bandit"
		},
		// git
		"ghcr.io/devcontainers/features/git:1": {
			"version": "os-provided",
			"ppa": "false"
		}
	},
	// 7. Configure tool-specific properties for VS Code.
	"customizations": {
		"vscode": {
			"extensions": [
				"github.copilot",
				"GitHub.copilot-chat",
				"ms-python.python",
				"ms-python.black-formatter",
				"ms-python.debugpy",
				"ms-python.isort",
				"ms-python.pylint",
				"ms-python.vscode-pylance",
				"ms-toolsai.jupyter",
				"ms-toolsai.jupyter-keymap",
				"ms-toolsai.jupyter-renderers",
				"ms-toolsai.vscode-jupyter-cell-tags",
				"ms-toolsai.vscode-jupyter-slideshow",
				"ms-toolsai.tensorboard",
				"charliermarsh.ruff",
				"ms-azuretools.vscode-docker"
			],
			"settings": {
				"editor.formatOnSave": true,
				"python.formatting.provider": "black",
				"python.analysis.typeCheckingMode": "basic"
			}
		}
	},
	// 8. Use a non-root user for better security and file ownership
	"containerUser": "${localEnv:USER}",
	"remoteUser": "${localEnv:USER}"
}